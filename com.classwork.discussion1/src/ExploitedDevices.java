import javax.swing.*;
import java.util.ArrayList;
import java.util.Scanner;

public class ExploitedDevices {

    private static String addNewDevice(){
        System.out.println("===== Add a New Device =====\n");
        //initialize variables
        String brand;
        String model;
        String os;
        String exploit;
        // initialize scanner
        Scanner input = new Scanner(System.in);
        System.out.println("Enter the Phone Brand: ");
        brand = input.nextLine();
        System.out.println("Enter Phone Model: ");
        model = input.nextLine();
        System.out.println("Enter Phone Operating System: ");
        os = input.nextLine();
        System.out.println("Enter Exploit Used: ");
        exploit = input.nextLine();
        // Create New Object with Mobile Device Class
        MobileDevice newPhone = new MobileDevice();
        // Set New Mobile Device Attributes Gathered from User
        newPhone.setNewDeviceData(brand, model, os, exploit);
        // Return added device from this instance
        String addedDevice = newPhone.getNewDeviceData();
        // Forecast Output
        System.out.println("You added the following device to the database: \n");
        // Print device that was added
        System.out.println(addedDevice + "\n");
        return addedDevice;
    }
    public static void main(String[] args) {
        // number of items currently in list at start
        int n = 0;
        // set up an array to store our custom class object
        ArrayList<String> list = new ArrayList<>();
        // Initialize the Scanner
        Scanner userInput = new Scanner(System.in);
        // Initialize the choice variable
        char choice;
        // Implement a do while loop to ensure the user has the option to exit
        do {
            // User Menu
            System.out.println("\n");
            System.out.println("========== MDX Team Device Exploit Database ==========");
            System.out.println("========== Developed by: Alexander La Barge ==========");
            System.out.println("=================== Menu Options =====================");
            System.out.println("\n");
            System.out.println("(a) Add a New Exploited Mobile Device");
            System.out.println("(b) Print All Devices and Associated Exploits Used");
            System.out.println("(c) Exit the Program");
            System.out.println("\n"); // spacing in loop
            // Take User Input for Choice
            System.out.print("Enter your selection: ");
            // Take input as a string and charAt(0), function returns the first character in that string
            choice = userInput.next().charAt(0);
            // switch case
            switch (choice) {
                case 'a' -> {
                    String deviceToAdd = addNewDevice();
                    list.add(deviceToAdd);
                    n += 1;
                }
                case 'b' -> {
                    System.out.println("===== Report of All Devices =====\n");
                    String[] columnNames = {"Brand", "Model", "Operating System", "Exploit Used"};
                    int numColumns = 4;
                    for (int columnsCount = 0; columnsCount < numColumns; columnsCount++) {
                        System.out.printf("%-25s", columnNames[columnsCount]);
                    }
                    System.out.println();
                    for (int count = 0; count < n; count++){
                        String deviceToPrint = list.get(count);
                        String [] deviceAttributes = deviceToPrint.split("/");
                        int attributeCount = 4;
                        for (int index = 0; index < attributeCount; index++){
                            String attributePrintable = deviceAttributes[index];
                            System.out.printf("%-25s", attributePrintable);
                        }
                        System.out.println();

                    }
                    System.out.println();
                    System.out.println();
                }
                case 'c' -> {
                    System.out.println("===== Program Terminating =====\n");
                    System.exit(0);
                }
                default -> System.out.println("Please enter a valid selection. \n");
            }
        }
        while (true);
    }
}